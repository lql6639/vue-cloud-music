{"version":3,"file":"js/225.76199d04.js","mappings":"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","sources":["webpack://cloud-music/./src/Mobile/components/music/songdetail.vue?d86d","webpack://cloud-music/./src/utils/parseLyric.js","webpack://cloud-music/./src/Mobile/components/music/songdetail.vue","webpack://cloud-music/./src/Mobile/components/music/songdetail.vue?63a3"],"sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-21b66fbc\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"songdetail-container\"\n};\nconst _hoisted_2 = [\"src\"];\nconst _hoisted_3 = {\n  class: \"songdetail\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"lyric: \", -1));\nconst _hoisted_5 = {\n  class: \"lyric\"\n};\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1));\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h3\", null, \"looking forword ...\", -1));\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_van_nav_bar = _resolveComponent(\"van-nav-bar\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createVNode(_component_van_nav_bar, {\n    title: \"音乐详情\",\n    \"left-text\": \"返回\",\n    \"left-arrow\": \"\",\n    fixed: \"\",\n    \"safe-area-inset-top\": \"\",\n    onClickLeft: $options.left\n  }, null, 8, [\"onClickLeft\"]), _createElementVNode(\"img\", {\n    src: $data.picUrl,\n    class: \"bgImg\"\n  }, null, 8, _hoisted_2), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"h3\", null, \"id: \" + _toDisplayString($data.id), 1), _createElementVNode(\"h3\", null, \"name: \" + _toDisplayString($data.songs.name), 1), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.songs.alia, (alia, index) => {\n    return _openBlock(), _createElementBlock(\"h3\", {\n      key: index\n    }, \"alia: \" + _toDisplayString(alia), 1);\n  }), 128)), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.songs.ar, (ar, index) => {\n    return _openBlock(), _createElementBlock(\"h3\", {\n      key: index\n    }, \"author[\" + _toDisplayString(index + 1) + \"]: \" + _toDisplayString(ar.name), 1);\n  }), 128)), _createElementVNode(\"h3\", null, \"album: \" + _toDisplayString($data.album), 1), _hoisted_4, _createElementVNode(\"div\", _hoisted_5, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($data.lyric, (lyric, index) => {\n    return _openBlock(), _createElementBlock(\"h4\", {\n      key: index\n    }, _toDisplayString(lyric.text), 1);\n  }), 128))]), _hoisted_6, _hoisted_7])]);\n}","/**\r\n * @description 解析歌词\r\n * @author liqinglin <1740242084@qq.com>\r\n * @license Apache-2.0\r\n * @param {string} lrc 执行目标函数的 lrc\r\n * @example\r\n * parseLyric(lrc)\r\n */\r\n\r\nexport default function parseLyric (lrc) {\r\n  // 切分歌词文本为每一行\r\n  const lines = lrc.split('\\n')\r\n  const lyric = lines.map(line => {\r\n    // 提取时间\r\n    const matches = line.match(/^\\[(\\d{2}:\\d{2}\\.\\d{2})\\]/g)\r\n    if (matches) {\r\n      /**\r\n       * 时间\r\n       */\r\n      const t = matches[0]\r\n      /**\r\n       * 格式化时间\r\n       */\r\n      const time = t.replace(/\\./g, ':')\r\n      /**\r\n       * 歌词文本，将时间部分从整行歌词中移除，使用 replace 方法替换掉时间部分，并使用 trim 方法去除前后的空格\r\n       */\r\n      const text = line.replace(matches, '').trim()\r\n      /**\r\n       * 返回解析结果\r\n       */\r\n      return { time, text }\r\n    }\r\n    return null\r\n  }).filter(line => line !== null)\r\n\r\n  return lyric\r\n}\r\n","import { showToast } from 'vant';\n\n// 获取歌曲详情 - 获取歌词 - 获取音乐评论\nimport { getSongDetail, getLyric, getCommentMusic } from '../../../api/api.js';\nimport parseLyric from '../../../utils/parseLyric.js';\nexport default {\n  // eslint-disable-next-line vue/multi-word-component-names\n  name: 'songdetail',\n  data() {\n    return {\n      id: '',\n      picUrl: '',\n      songs: [],\n      // 专辑\n      album: '',\n      // 歌词\n      lyric: ''\n    };\n  },\n  methods: {\n    left() {\n      showToast('返回');\n      this.$router.go(-1);\n    },\n    async initGet() {\n      // 传值\n      this.id = this.$router.currentRoute.value.query.id;\n      // 歌单详情\n      const {\n        data: songdetail\n      } = await getSongDetail(this.id);\n      // console.log('歌曲详情')\n      // console.log(songdetail)\n      this.songs = songdetail.songs[0];\n      this.picUrl = this.songs.al.picUrl;\n      this.album = this.songs.al.name;\n      sessionStorage.setItem('songdetail', JSON.stringify(songdetail));\n      // 歌词\n      const {\n        data: lyric\n      } = await getLyric(this.id);\n      // console.log('歌词')\n      // console.log(lyric)\n      this.lyric = parseLyric(lyric.lrc.lyric);\n      sessionStorage.setItem('lyric', JSON.stringify(lyric));\n      // 音乐评论\n      const {\n        data: commentmusic\n      } = await getCommentMusic(this.id);\n      // console.log('音乐评论')\n      // console.log(commentmusic)\n      sessionStorage.setItem('commentmusic', JSON.stringify(commentmusic));\n    }\n  },\n  mounted() {\n    this.initGet();\n  }\n};","/* unplugin-vue-components disabled */import { render } from \"./songdetail.vue?vue&type=template&id=21b66fbc&scoped=true\"\nimport script from \"./songdetail.vue?vue&type=script&lang=js\"\nexport * from \"./songdetail.vue?vue&type=script&lang=js\"\n\nimport \"./songdetail.vue?vue&type=style&index=0&id=21b66fbc&lang=less&scoped=true\"\n\nimport exportComponent from \"../../../../node_modules/.pnpm/registry.npmmirror.com+vue-loader@17.2.2_vue@3.2.13_webpack@5.88.2/node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-21b66fbc\"]])\n\nexport default __exports__"],"names":["_withScopeId","n","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_","_hoisted_5","_hoisted_6","_hoisted_7","render","_ctx","_cache","$props","$setup","$data","$options","_component_van_nav_bar","title","fixed","onClickLeft","left","src","picUrl","id","songs","name","alia","index","key","ar","album","lyric","text","parseLyric","lrc","lines","split","map","line","matches","match","t","time","replace","trim","filter","data","methods","this","$router","go","initGet","currentRoute","value","query","songdetail","al","sessionStorage","setItem","JSON","stringify","commentmusic","mounted","__exports__"],"sourceRoot":""}